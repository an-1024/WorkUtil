<mxfile host="app.diagrams.net" modified="2022-08-21T15:42:35.386Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36" etag="qUq27mBg0oH49pBNIJhT" version="20.2.5" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="4939" dy="2057" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="-McDBByZdcgpEU9wJOO_-78" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=18;fontColor=#00CCCC;strokeColor=#00CCCC;fillColor=#00CCCC;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="190" y="-100" width="470" height="550" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-0" target="vhB5iVHmFAJZdGOzhbKn-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-0" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Spring IOC 细节-&amp;gt; XML的bean加载&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="304" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-5" target="vhB5iVHmFAJZdGOzhbKn-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-5" value="ClassPathXmlApplicationContext(&quot;classpath:spring-config.xml&quot;)&lt;br&gt;指定加载文件位置" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="234" y="80" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-8" target="vhB5iVHmFAJZdGOzhbKn-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-8" target="-McDBByZdcgpEU9wJOO_-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-8" value="super(parent); 父级的层层调用，初始化 Spring Factory的属性值" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="247" y="160" width="334" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-10" target="vhB5iVHmFAJZdGOzhbKn-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-10" target="vhB5iVHmFAJZdGOzhbKn-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-10" value="&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;validating = true // XML 文档是否需要校验&lt;/b&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1228.43" y="60" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-12" target="vhB5iVHmFAJZdGOzhbKn-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-12" value="&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;String[] configLocations 配置文件路径&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;setIdCalled = false 是否重新设置 bean 名称 ：fasle表示可以， true 表示不能自定义&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1090.94" y="120" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-15" target="vhB5iVHmFAJZdGOzhbKn-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-15" value="&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Boolean allowBeanDefinitionOverriding是否允许 beanDefinition 定义被覆盖&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Boolean allowCircularReferences 允许循环引用&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;DefaultListableBeanFactory beanFactory ：beanFactory 工厂定义&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1109.69" y="180" width="477.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-18" value="&lt;ol&gt;&lt;li&gt;String MESSAGE_SOURCE_BEAN_NAME = &quot;messageSource&quot; 消息解析器， 未指定加载父类的消息解析器&lt;br&gt;&lt;/li&gt;&lt;li&gt;String LIFECYCLE_PROCESSOR_BEAN_NAME = &quot;lifecycleProcessor&quot; 生命周期处理器，为提供默认使用DefaultLifecycleProcessor&lt;/li&gt;&lt;li&gt;String APPLICATION_EVENT_MULTICASTER_BEAN_NAME = &quot;applicationEventMulticaster&quot; 应用事件广播，未指定默认使用SimpleApplicationEventMulticaster&lt;br&gt;&lt;/li&gt;&lt;li&gt;String id = ObjectUtils.identityToString(this) 应用id 赋值&lt;br&gt;&lt;/li&gt;&lt;li&gt;String displayName = ObjectUtils.identityToString(this) 显示名称赋值&lt;br&gt;&lt;/li&gt;&lt;li&gt;ApplicationContext parent 父类上下文&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;ConfigurableEnvironment environment 应用执行环境&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;final List&amp;lt;BeanFactoryPostProcessor&amp;gt; beanFactoryPostProcessors = new ArrayList&amp;lt;&amp;gt;() 实例化前置处理器集合&lt;br&gt;&lt;/li&gt;&lt;li&gt;long startupDate 应用开始启动时间&lt;br&gt;&lt;/li&gt;&lt;li&gt;final AtomicBoolean active = new AtomicBoolean() 应用是否正在运行&lt;/li&gt;&lt;li&gt;final AtomicBoolean closed = new AtomicBoolean() 应用是否已经关闭&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Object startupShutdownMonitor = new Object() 刷新和销毁的同步监视器&lt;/li&gt;&lt;li&gt;Thread shutdownHook&amp;nbsp; 如果已经注册JVM钩子函数，那么该变量就是JVM 钩子函数的引用&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;ResourcePatternResolver resourcePatternResolver; 资源解析器 在&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;AbstractApplicationContext 构造函数中实现赋值&amp;nbsp;this.resourceLoader = resourceLoader(&lt;b&gt;AbstractApplicationContext&lt;/b&gt;)&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;LifecycleProcessor lifecycleProcessor; 生命周期处理器&lt;br&gt;&lt;/li&gt;&lt;li&gt;MessageSource messageSource 国际化的实现&lt;br&gt;&lt;/li&gt;&lt;li&gt;ApplicationEventMulticaster applicationEventMulticaster; 管理许多 {@link ApplicationListener} 对象并向它们发布事件的对象实现的接口。&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;final Set&amp;lt;ApplicationListener&amp;lt;?&amp;gt;&amp;gt; applicationListeners = new LinkedHashSet&amp;lt;&amp;gt;(); 应用程序实现的监听程序的接口&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Set&amp;lt;ApplicationListener&amp;lt;?&amp;gt;&amp;gt; earlyApplicationListeners; 本地监听器的注册&lt;br&gt;&lt;/li&gt;&lt;li&gt;Set&amp;lt;ApplicationEvent&amp;gt; earlyApplicationEvents 应用程序所有时间扩展类&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="800" y="260" width="1096.87" height="300" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-0" target="-McDBByZdcgpEU9wJOO_-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-0" target="-McDBByZdcgpEU9wJOO_-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-0" value="设置&amp;nbsp;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;font-weight: bold;&quot; color=&quot;#ff3333&quot;&gt;configLocations 的值&lt;/font&gt;&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;setConfigLocations(configLocations)&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="296" y="250" width="236" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-4" target="-McDBByZdcgpEU9wJOO_-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-4" target="-McDBByZdcgpEU9wJOO_-26">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-200" y="275" />
              <mxPoint x="-200" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-4" value="resolvePath(locations[i])&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#e06d0d&quot;&gt;getEnvironment() 获取当前系统环境变量 environment 变量在这里完成了赋值&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;getEnvironment().resolveRequiredPlaceholders(path) 创建资源加载器解析资源所在路径&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-190" y="223.75" width="350" height="102.5" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#E06D0D;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-6" target="-McDBByZdcgpEU9wJOO_-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-8" value="AbstractEnvironment&lt;br&gt;&lt;ol&gt;&lt;li&gt;final String IGNORE_GETENV_PROPERTY_NAME = &quot;spring.getenv.ignore&quot; 系统环境需要忽略的属性&lt;br&gt;&lt;/li&gt;&lt;li&gt;final String ACTIVE_PROFILES_PROPERTY_NAME = &quot;spring.profiles.active&quot;&amp;nbsp;设置以指定活动配置文件的属性名称&lt;br&gt;&lt;/li&gt;&lt;li&gt;static final String RESERVED_DEFAULT_PROFILE_NAME = &quot;default&quot;;&amp;nbsp; &amp;nbsp;默认配置文件名称的名称&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;&lt;font color=&quot;#ffff00&quot; style=&quot;font-size: 14px;&quot;&gt;final MutablePropertySources propertySources = new MutablePropertySources()&amp;nbsp; 属性配置类 -&amp;gt; 父类构造函数中调用了&amp;nbsp;customizePropertySources(this.propertySources) 来初始化该变量，具体实现子类的重写方法中(同样我们也可以指定 系统(System) 或者 JVM 需要加载的属性)&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#EF8707;strokeColor=#666666;fontColor=#333333;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-1135" y="70" width="1160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-16" value="" style="group" vertex="1" connectable="0" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-880" y="220" width="650" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-6" value="createEnvironment -&amp;gt; new StandardEnvironment()&lt;br&gt;&lt;ol&gt;&lt;li&gt;final String SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME = &quot;systemEnvironment&quot; 系统环境变量属性&lt;br&gt;&lt;/li&gt;&lt;li&gt;final String SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME = &quot;systemProperties&quot; JVM 环境变量属&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#EF8707;strokeColor=#666666;rounded=0;fontColor=#333333;horizontal=1;verticalAlign=top;" vertex="1" parent="-McDBByZdcgpEU9wJOO_-16">
          <mxGeometry width="650" height="110.00000000000001" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-15" value="&lt;font color=&quot;#000000&quot;&gt;customizePropertySources(MutablePropertySources propertySources)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FFFF00;strokeColor=#EF8707;fillColor=#FFFF00;align=left;" vertex="1" parent="-McDBByZdcgpEU9wJOO_-16">
          <mxGeometry x="10" y="76.15384615384617" width="630" height="25.384615384615387" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#000000;exitX=0;exitY=0.582;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-8" target="-McDBByZdcgpEU9wJOO_-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-26" value="doResolvePlaceholders(String text, PropertyPlaceholderHelper helper)实现对了资源路径的解析" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-710" y="350" width="440" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-31" target="-McDBByZdcgpEU9wJOO_-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-39" value="&lt;div style=&quot;text-align: left;&quot;&gt;给 Spring&lt;/div&gt;一些基础属性&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;赋值&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;fontFamily=Verdana;fontColor=#000000;" vertex="1" connectable="0" parent="-McDBByZdcgpEU9wJOO_-36">
          <mxGeometry x="0.007" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-31" value="refresh() 完成了 bean 的创建过程；以下流程是 refresh 细节" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="354" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-35" target="-McDBByZdcgpEU9wJOO_-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-40" value="创建 BeanFactory 工厂" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=14;fontFamily=Verdana;fontColor=#000000;" vertex="1" connectable="0" parent="-McDBByZdcgpEU9wJOO_-38">
          <mxGeometry x="-0.3238" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-35" value="prepareRefresh&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;this.startupDate = System.currentTimeMillis() 启动时间赋值&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;this.closed.set(false);&amp;nbsp;&lt;br&gt;&lt;/li&gt;&lt;li&gt;this.active.set(true);&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;initPropertySources() 父类留给子类有关环境属性的扩展方法，父类没有实现具体逻辑&lt;/font&gt;&lt;/li&gt;&lt;li&gt;getEnvironment().validateRequiredProperties() 校验环境属性是否全部填充完成&lt;br&gt;&lt;/li&gt;&lt;li&gt;earlyApplicationListeners、applicationListeners 在 Spring Boot 中会提前加载很多事件监听器(14 个)：逻辑是判断 earlyApplicationListeners 集合是否为 null，如果为 null 将 applicationListeners 集合赋值给 earlyApplicationListeners；反之，则将 applicationListeners 集合清空，将原有 earlyApplicationListeners 赋值给 applicationListeners (Spring Boot 中就是利用了这个逻辑)&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="89" y="560" width="650" height="170" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#FFFF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-37" target="-McDBByZdcgpEU9wJOO_-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#00FF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-37" target="-McDBByZdcgpEU9wJOO_-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-37" value="obtainFreshBeanFactory&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#e06d0d&quot;&gt;refreshBeanFactory(); 针对 beanFactory的一系例操作&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;getBeanFactory 获取创建成功的 BeanFactory&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="99" y="780" width="630" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#FFFF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-43" target="-McDBByZdcgpEU9wJOO_-47">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-43" value="refreshBeanFactory&lt;br&gt;&lt;ol&gt;&lt;li&gt;存在 BeanFactory 就销毁&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ffff00&quot;&gt;创建 BeanFactory 工厂&amp;nbsp;DefaultListableBeanFactory beanFactory = createBeanFactory()&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#E06D0D;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="800" y="757.5" width="510" height="105" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-47" target="-McDBByZdcgpEU9wJOO_-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-47" value="createBeanFactory&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;创建了一个DefaultListableBeanFactory对象，又是一层层的 super&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FFFF00;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1360" y="780" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-50" target="-McDBByZdcgpEU9wJOO_-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-50" value="DefaultListableBeanFactory&lt;br&gt;&lt;ol&gt;&lt;li&gt;boolean allowBeanDefinitionOverriding = true&amp;nbsp;是否允许重新注册具有相同名称的不同定义&lt;br&gt;&lt;/li&gt;&lt;li&gt;boolean allowEagerClassLoading = true&lt;br&gt;&lt;/li&gt;&lt;li&gt;AutowireCandidateResolver autowireCandidateResolver = SimpleAutowireCandidateResolver.INSTANCE&amp;nbsp;用于检查 bean 定义是否为自动装配候选者的解析器&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Map&amp;lt;Class&amp;lt;?&amp;gt;, Object&amp;gt; resolvableDependencies = new ConcurrentHashMap&amp;lt;&amp;gt;(16) 从依赖类型映射到相应的自动装配值&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Map&amp;lt;String, BeanDefinition&amp;gt; beanDefinitionMap = new ConcurrentHashMap&amp;lt;&amp;gt;(256)&amp;nbsp;bean 定义对象的映射，以 bean 名称为键&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Map&amp;lt;String, BeanDefinitionHolder&amp;gt; mergedBeanDefinitionHolders = new ConcurrentHashMap&amp;lt;&amp;gt;(256)&amp;nbsp;单例和非单例 bean 名称的映射，以依赖类型为键。&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Map&amp;lt;Class&amp;lt;?&amp;gt;, String[]&amp;gt; singletonBeanNamesByType = new ConcurrentHashMap&amp;lt;&amp;gt;(64) 仅单例 bean 名称的映射，以依赖类型为键&lt;br&gt;&lt;/li&gt;&lt;li&gt;volatile Set&amp;lt;String&amp;gt; manualSingletonNames = new LinkedHashSet&amp;lt;&amp;gt;(16);&amp;nbsp; 按照顺序手动注册单例 bean 的集合&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1840" y="585" width="780" height="190" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#00FF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-52" target="-McDBByZdcgpEU9wJOO_-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-52" value="AbstractAutowireCapableBeanFactory&lt;br&gt;&lt;ol&gt;&lt;li&gt;InstantiationStrategy instantiationStrategy = new CglibSubclassingInstantiationStrategy() bea 实例化策略&lt;br&gt;&lt;/li&gt;&lt;li&gt;ParameterNameDiscoverer parameterNameDiscoverer = new DefaultParameterNameDiscoverer() 方法参数名称的解析策略&lt;br&gt;&lt;/li&gt;&lt;li&gt;boolean allowCircularReferences = true; 是否尝试自动解决循环依赖&lt;br&gt;&lt;/li&gt;&lt;li&gt;boolean allowRawInjectionDespiteWrapping = false 是否在循环依赖的情况下注入 bean&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Set&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt; ignoredDependencyTypes = new HashSet&amp;lt;&amp;gt;() 自动装配需要忽略的类型，如字符串等，默认为 null&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#00ff00&quot;&gt;final Set&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt; ignoredDependencyInterfaces = new HashSet&amp;lt;&amp;gt;();&amp;nbsp;在依赖检查和自动装配时忽略依赖接口，作为类对象集。默认情况下，仅忽略 BeanFactory 接口。&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;final NamedThreadLocal&amp;lt;String&amp;gt; currentlyCreatedBean = new NamedThreadLocal&amp;lt;&amp;gt;(&quot;Currently created bean&quot;)当前创建的 bean 的名称，用于对 getBean 等调用的隐式依赖注册，这些调用由用户指定的供应商回调触发&lt;br&gt;&lt;/li&gt;&lt;li&gt;final ConcurrentMap&amp;lt;String, BeanWrapper&amp;gt; factoryBeanInstanceCache = new ConcurrentHashMap&amp;lt;&amp;gt;()&amp;nbsp;未完成 FactoryBean 实例的缓存&lt;br&gt;&lt;/li&gt;&lt;li&gt;final ConcurrentMap&amp;lt;Class&amp;lt;?&amp;gt;, Method[]&amp;gt; factoryMethodCandidateCache = new ConcurrentHashMap&amp;lt;&amp;gt;()&amp;nbsp;每个工厂类的候选工厂方法缓存&lt;br&gt;&lt;/li&gt;&lt;li&gt;final ConcurrentMap&amp;lt;Class&amp;lt;?&amp;gt;, PropertyDescriptor[]&amp;gt; filteredPropertyDescriptorsCache 过滤后的 PropertyDescriptor 缓存：bean 类到 PropertyDescriptor 数组&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1901.25" y="820" width="657.5" height="285" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-54" value="AbstractAutowireCapableBeanFactory：构造函数执行 -&amp;gt; 忽略依赖接口&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;ignoreDependencyInterface(BeanNameAware.class);&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;&quot;&gt;		&lt;/span&gt;ignoreDependencyInterface(BeanFactoryAware.class);&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;&quot;&gt;		&lt;/span&gt;ignoreDependencyInterface(BeanClassLoaderAware.class);&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#00FF00;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="2620" y="917.5" width="430" height="90" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#00FF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-56" target="-McDBByZdcgpEU9wJOO_-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-56" value="customizeBeanFactory 看到这个有没有觉得熟悉：类似前面提到系统环境属性的扩展点: 定义&amp;nbsp; beanFactory 的 bean 的属性：&lt;br&gt;&lt;ol&gt;&lt;li&gt;allowBeanDefinitionOverriding&lt;br&gt;&lt;/li&gt;&lt;li&gt;allowCircularReferences&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="72" y="870" width="684" height="70" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#EA6B66;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-61" target="-McDBByZdcgpEU9wJOO_-63">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-220" y="1055" />
              <mxPoint x="-220" y="955" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-61" target="-McDBByZdcgpEU9wJOO_-65">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-220" y="1055" />
              <mxPoint x="-220" y="1090" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=18;fontColor=#00CCCC;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-61" target="-McDBByZdcgpEU9wJOO_-75">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-220" y="1055" />
              <mxPoint x="-220" y="1165" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-82" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=38;fontColor=#FFFF00;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-61" target="-McDBByZdcgpEU9wJOO_-81">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-330" y="1270" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-220" y="1055" />
              <mxPoint x="-220" y="1260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-61" value="&lt;font color=&quot;#ea6b66&quot;&gt;loadBeanDefinitions(beanFactory)：加载 XML(一系列的重载调用) 读取 bean 信息并解析&lt;/font&gt;&lt;br&gt;&lt;ol style=&quot;&quot;&gt;&lt;li style=&quot;&quot;&gt;&lt;font color=&quot;#e06d0d&quot;&gt;&lt;font style=&quot;&quot;&gt;使用适配器模式将 beanFactory 转为转&amp;nbsp;&lt;/font&gt;XmlBeanDefinitionReader XML 解析器&amp;nbsp;XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;设置 XML 解析器需要的运行环境&amp;nbsp;beanDefinitionReader.setEnvironment(this.getEnvironment());&lt;/li&gt;&lt;li style=&quot;&quot;&gt;设置资源加载器&amp;nbsp;beanDefinitionReader.setResourceLoader(this);&lt;/li&gt;&lt;li style=&quot;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;设置用于解析 SAX 实体解析器，默认使用&amp;nbsp;ResourceEntityResolver 解析器。可以自定义实体解析覆盖，例如相对于某些特定的基本路径&amp;nbsp;beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;&lt;font color=&quot;#00cccc&quot;&gt;初始化解析器属性：initBeanDefinitionReader(beanDefinitionReader);&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;&lt;font color=&quot;#ffff00&quot;&gt;重载&amp;nbsp;loadBeanDefinitions(beanDefinitionReader);&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-174.08" y="980" width="1176.15" height="150" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-63" value="创建&amp;nbsp;XmlBeanDefinitionReader 对象&lt;br&gt;&lt;ol&gt;&lt;li&gt;static final int VALIDATION_NONE = XmlValidationModeDetector.VALIDATION_NONE -&amp;gt; 0;&amp;nbsp; 禁用验证&lt;br&gt;&lt;/li&gt;&lt;li&gt;static final int VALIDATION_AUTO = XmlValidationModeDetector.VALIDATION_AUTO; -&amp;gt; 1 表示应自动检测验证模式。&lt;br&gt;&lt;/li&gt;&lt;li&gt;static final int VALIDATION_DTD = XmlValidationModeDetector.VALIDATION_DTD; -&amp;gt; 2 表示 DTD 格式&lt;br&gt;&lt;/li&gt;&lt;li&gt;static final int VALIDATION_XSD = XmlValidationModeDetector.VALIDATION_XSD; -&amp;gt; 3 表示 XSD 格式&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#E06D0D;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-990" y="900" width="720" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FFFF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-65" target="-McDBByZdcgpEU9wJOO_-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-65" value="ResourceEntityResolver&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#ffff00&quot;&gt;super(resourceLoader.getClassLoader());&amp;nbsp;&amp;nbsp;调用父类方法获取对应的解析器 DTD or XSD&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-800" y="1060" width="530" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-70" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-67" target="-McDBByZdcgpEU9wJOO_-69">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=18;fontColor=#00CCCC;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-67" target="-McDBByZdcgpEU9wJOO_-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-67" value="DelegatingEntityResolver&lt;br&gt;static final String DTD_SUFFIX = &quot;.dtd&quot;;&lt;br&gt;static final String XSD_SUFFIX = &quot;.xsd&quot;;&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;this.dtdResolver = new BeansDtdResolver();&amp;nbsp; &amp;nbsp;创建 DTD 解析器&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#00cccc&quot;&gt;new PluggableSchemaResolver(classLoader) XSD 解析器 -&amp;gt; &quot;META-INF/spring.schemas&quot;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FFFF00;strokeColor=#FFFF00;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-1460" y="1040" width="580" height="100" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-69" value="BeansDtdResolver&lt;br&gt;&lt;ol&gt;&lt;li&gt;static final String DTD_EXTENSION = &quot;.dtd&quot;;&lt;br&gt;&lt;/li&gt;&lt;li&gt;static final String DTD_NAME = &quot;spring-beans&quot;;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-1900" y="940" width="330" height="70" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-73" value="PluggableSchemaResolver XSD 文件路径映射&lt;br&gt;&lt;ol&gt;&lt;li&gt;static final String DEFAULT_SCHEMA_MAPPINGS_LOCATION = &quot;META-INF/spring.schemas&quot;;定义架构映射的文件的位置。可以存在于多个 JAR 文件中&lt;br&gt;&lt;/li&gt;&lt;li&gt;volatile Map&amp;lt;String, String&amp;gt; schemaMappings 资源路径映射&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;注意这里调试的时候&amp;nbsp;schemaMappings 发现被赋值了，这其实是 IDEA 自己调用了&amp;nbsp;PluggableSchemaResolver toString 方法，而 toString 方法中又包含了&amp;nbsp;getSchemaMappings() 导致这个 Map 被赋值。&lt;/div&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#00CCCC;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-2640" y="1070" width="1070" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-75" value="设置解析方式:&lt;br&gt;&lt;ol&gt;&lt;li&gt;this.validationMode = 1 表示应自动检测验证模式&lt;br&gt;&lt;/li&gt;&lt;li&gt;this.namespaceAware&lt;b&gt;&amp;nbsp;&lt;/b&gt;= false&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#00CCCC;strokeColor=#00CCCC;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-680" y="1130" width="350" height="70" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-80" value="&lt;font style=&quot;font-size: 38px;&quot; color=&quot;#000000&quot;&gt;主流程&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=18;fontColor=#00CCCC;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="316" y="-70" width="196" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-84" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=38;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-81" target="-McDBByZdcgpEU9wJOO_-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=38;fontColor=#00CCCC;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-81" target="-McDBByZdcgpEU9wJOO_-85">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-730" y="1260" />
              <mxPoint x="-730" y="1330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-90" value="String[] -&amp;gt; String" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Verdana;fontColor=#00CCCC;" vertex="1" connectable="0" parent="-McDBByZdcgpEU9wJOO_-86">
          <mxGeometry x="0.402" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-81" value="loadBeanDefinitions(XmlBeanDefinitionReader reader)：两种获取文件资源路径&lt;br&gt;&lt;ol&gt;&lt;li&gt;以 Resource 方式获取&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;以 String 的形式获取&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#00cccc&quot;&gt;重载&amp;nbsp;reader.loadBeanDefinitions(configLocations)&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FFFF00;strokeColor=#FFFF00;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-705" y="1220" width="430" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-83" value="String[] configLocations = getConfigLocations()：&lt;br&gt;看到这个 getConfigLocations 应该很熟悉了吧，在设置配置文件路径的时候赋的值" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#FF0000;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-1050" y="1230" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-92" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp;String -&amp;gt; Resource[]&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=11;fontColor=#FF0000;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-85" target="-McDBByZdcgpEU9wJOO_-91">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1339.0000000000005" y="1329.62" as="sourcePoint" />
            <mxPoint x="-1550.0000000000005" y="1329.6969230769228" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-85" value="loadBeanDefinitions(String... locations)&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;重载&amp;nbsp;loadBeanDefinitions(location)-&amp;gt;&amp;nbsp;loadBeanDefinitions(location, null)&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#00CCCC;strokeColor=#00CCCC;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-1370" y="1300" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-94" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=11;fontColor=#FFFF00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-91" target="-McDBByZdcgpEU9wJOO_-93">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=11;fontColor=#00CCCC;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-91" target="-McDBByZdcgpEU9wJOO_-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-91" value="loadBeanDefinitions(String location, @Nullable Set&amp;lt;Resource&amp;gt; actualResources)&lt;br&gt;&lt;ol&gt;&lt;li&gt;在最开始的 supper 中完成了父类&amp;nbsp;ResourcePatternResolver 变量&amp;nbsp;this.resourceLoader = resourceLoader(AbstractApplicationContext) 赋值&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ffff00&quot;&gt;Resource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location)&amp;nbsp;获取具体资源解析器的定位 ResourcePatternResolver 有多个实现&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#00cccc&quot;&gt;重载 loadBeanDefinitions(resources)&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#FF0000;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-2420" y="1286.25" width="900" height="87.5" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-93" value="getResources(String locationPattern)&lt;br&gt;&lt;ol&gt;&lt;li&gt;String CLASSPATH_ALL_URL_PREFIX = &quot;classpath*:&quot;&amp;nbsp; 资源文件属性是否以 classpath* 开始&lt;br&gt;&lt;/li&gt;&lt;li&gt;或者以 war: 开始&lt;/li&gt;&lt;li&gt;都不是将 location 封装成一个 Resource[] 对象&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#FFFF00;strokeColor=#FFFF00;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-3030" y="1290" width="560" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-100" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=11;fontColor=#00CCCC;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-97" target="-McDBByZdcgpEU9wJOO_-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-97" value="loadBeanDefinitions(Resource... resources)&lt;br&gt;&lt;ol&gt;&lt;li&gt;for 循环处理 resources&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#00CCCC;strokeColor=#00CCCC;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-2090" y="1410" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-102" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=11;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-99" target="-McDBByZdcgpEU9wJOO_-101">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-99" value="loadBeanDefinitions(Resource resource)&lt;br&gt;&lt;ol&gt;&lt;li&gt;将 resource 封装为 encodedResource，该类实现了 InputStreamSource 并设置解析编码格式，这里什么都没有做，传的都是 null&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;继续重载调用&amp;nbsp;loadBeanDefinitions(EncodedResource encodedResource)&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#00CCCC;strokeColor=#00CCCC;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-2336.87" y="1500" width="733.75" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-101" value="" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#FF0000;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-2894" y="1510" width="500" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
