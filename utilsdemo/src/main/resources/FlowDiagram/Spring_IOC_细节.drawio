<mxfile host="app.diagrams.net" modified="2022-08-20T15:18:41.434Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36" etag="p0K0SX1i7pnr7d2JZnSF" version="20.2.5" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="2519" dy="556" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-0" target="vhB5iVHmFAJZdGOzhbKn-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-0" value="Spring IOC 细节-&amp;gt; XML的bean加载" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="290" y="20" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-5" target="vhB5iVHmFAJZdGOzhbKn-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-5" value="ClassPathXmlApplicationContext(&quot;classpath:spring-config.xml&quot;)&lt;br&gt;指定加载文件位置" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="234" y="80" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-8" target="vhB5iVHmFAJZdGOzhbKn-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-8" target="-McDBByZdcgpEU9wJOO_-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-8" value="super(parent); 父级的层层调用，初始化 Spring Factory的属性值" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="247" y="160" width="334" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-10" target="vhB5iVHmFAJZdGOzhbKn-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-10" target="vhB5iVHmFAJZdGOzhbKn-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-10" value="&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;validating = true // XML 文档是否需要校验&lt;/b&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="887.5" y="50" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-12" target="vhB5iVHmFAJZdGOzhbKn-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-12" value="&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;String[] configLocations 配置文件路径&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;setIdCalled = false 是否重新设置 bean 名称 ：fasle表示可以， true 表示不能自定义&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="750" y="120" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="vhB5iVHmFAJZdGOzhbKn-15" target="vhB5iVHmFAJZdGOzhbKn-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-15" value="&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Boolean allowBeanDefinitionOverriding是否允许 beanDefinition 定义被覆盖&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Boolean allowCircularReferences 允许循环引用&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;DefaultListableBeanFactory beanFactory ：beanFactory 工厂定义&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="768.75" y="170" width="477.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="vhB5iVHmFAJZdGOzhbKn-18" value="&lt;ol&gt;&lt;li&gt;String MESSAGE_SOURCE_BEAN_NAME = &quot;messageSource&quot; 消息解析器， 未指定加载父类的消息解析器&lt;br&gt;&lt;/li&gt;&lt;li&gt;String LIFECYCLE_PROCESSOR_BEAN_NAME = &quot;lifecycleProcessor&quot; 生命周期处理器，为提供默认使用DefaultLifecycleProcessor&lt;/li&gt;&lt;li&gt;String APPLICATION_EVENT_MULTICASTER_BEAN_NAME = &quot;applicationEventMulticaster&quot; 应用事件广播，未指定默认使用SimpleApplicationEventMulticaster&lt;br&gt;&lt;/li&gt;&lt;li&gt;String id = ObjectUtils.identityToString(this) 应用id 赋值&lt;br&gt;&lt;/li&gt;&lt;li&gt;String displayName = ObjectUtils.identityToString(this) 显示名称赋值&lt;br&gt;&lt;/li&gt;&lt;li&gt;ApplicationContext parent 父类上下文&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;ConfigurableEnvironment environment 应用执行环境&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;final List&amp;lt;BeanFactoryPostProcessor&amp;gt; beanFactoryPostProcessors = new ArrayList&amp;lt;&amp;gt;() 实例化前置处理器集合&lt;br&gt;&lt;/li&gt;&lt;li&gt;long startupDate 应用开始启动时间&lt;br&gt;&lt;/li&gt;&lt;li&gt;final AtomicBoolean active = new AtomicBoolean() 应用是否正在运行&lt;/li&gt;&lt;li&gt;final AtomicBoolean closed = new AtomicBoolean() 应用是否已经关闭&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Object startupShutdownMonitor = new Object() 刷新和销毁的同步监视器&lt;/li&gt;&lt;li&gt;Thread shutdownHook&amp;nbsp; 如果已经注册JVM钩子函数，那么该变量就是JVM 钩子函数的引用&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;ResourcePatternResolver resourcePatternResolver; 资源解析器 在&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;AbstractApplicationContext 构造函数中实现&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;LifecycleProcessor lifecycleProcessor; 生命周期处理器&lt;br&gt;&lt;/li&gt;&lt;li&gt;MessageSource messageSource 国际化的实现&lt;br&gt;&lt;/li&gt;&lt;li&gt;ApplicationEventMulticaster applicationEventMulticaster; 管理许多 {@link ApplicationListener} 对象并向它们发布事件的对象实现的接口。&lt;br&gt;&lt;/li&gt;&lt;li&gt;final Set&amp;lt;ApplicationListener&amp;lt;?&amp;gt;&amp;gt; applicationListeners = new LinkedHashSet&amp;lt;&amp;gt;(); 应用程序实现的监听程序的接口&lt;br&gt;&lt;/li&gt;&lt;li&gt;Set&amp;lt;ApplicationListener&amp;lt;?&amp;gt;&amp;gt; earlyApplicationListeners; 本地监听器的注册&lt;br&gt;&lt;/li&gt;&lt;li&gt;Set&amp;lt;ApplicationEvent&amp;gt; earlyApplicationEvents 应用程序所有时间扩展类&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="683.13" y="240" width="916.87" height="300" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-0" target="-McDBByZdcgpEU9wJOO_-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-0" target="-McDBByZdcgpEU9wJOO_-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-0" value="设置&amp;nbsp;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;font-weight: bold;&quot; color=&quot;#ff3333&quot;&gt;configLocations 的值&lt;/font&gt;&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;setConfigLocations(configLocations)&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="296" y="250" width="236" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-4" target="-McDBByZdcgpEU9wJOO_-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-4" target="-McDBByZdcgpEU9wJOO_-26">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-170" y="275" />
              <mxPoint x="-170" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-4" value="resolvePath(locations[i])&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;font color=&quot;#e06d0d&quot;&gt;getEnvironment() 获取当前系统环境变量 environment 变量在这里完成了赋值&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;getEnvironment().resolveRequiredPlaceholders(path) 创建资源加载器解析资源所在路径&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-150" y="223.75" width="350" height="102.5" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#E06D0D;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-6" target="-McDBByZdcgpEU9wJOO_-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-8" value="AbstractEnvironment&lt;br&gt;&lt;ol&gt;&lt;li&gt;final String IGNORE_GETENV_PROPERTY_NAME = &quot;spring.getenv.ignore&quot; 系统环境需要忽略的属性&lt;br&gt;&lt;/li&gt;&lt;li&gt;final String ACTIVE_PROFILES_PROPERTY_NAME = &quot;spring.profiles.active&quot;&amp;nbsp;设置以指定活动配置文件的属性名称&lt;br&gt;&lt;/li&gt;&lt;li&gt;static final String RESERVED_DEFAULT_PROFILE_NAME = &quot;default&quot;;&amp;nbsp; &amp;nbsp;默认配置文件名称的名称&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;&lt;font color=&quot;#ffff00&quot; style=&quot;font-size: 14px;&quot;&gt;final MutablePropertySources propertySources = new MutablePropertySources()&amp;nbsp; 属性配置类 -&amp;gt; 父类构造函数中调用了&amp;nbsp;customizePropertySources(this.propertySources) 来初始化该变量，具体实现子类的重写方法中(同样我们也可以指定 系统(System) 或者 JVM 需要加载的属性)&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#EF8707;strokeColor=#666666;fontColor=#333333;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-1095" y="70" width="1160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-16" value="" style="group" vertex="1" connectable="0" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-840" y="220" width="650" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-6" value="createEnvironment -&amp;gt; new StandardEnvironment()&lt;br&gt;&lt;ol&gt;&lt;li&gt;final String SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME = &quot;systemEnvironment&quot; 系统环境变量属性&lt;br&gt;&lt;/li&gt;&lt;li&gt;final String SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME = &quot;systemProperties&quot; JVM 环境变量属&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#EF8707;strokeColor=#666666;rounded=0;fontColor=#333333;horizontal=1;verticalAlign=top;" vertex="1" parent="-McDBByZdcgpEU9wJOO_-16">
          <mxGeometry width="650" height="110.00000000000001" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-15" value="&lt;font color=&quot;#000000&quot;&gt;customizePropertySources(MutablePropertySources propertySources)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FFFF00;strokeColor=#EF8707;fillColor=#FFFF00;align=left;" vertex="1" parent="-McDBByZdcgpEU9wJOO_-16">
          <mxGeometry x="10" y="76.15384615384617" width="630" height="25.384615384615387" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=14;fontColor=#000000;exitX=0;exitY=0.582;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-8" target="-McDBByZdcgpEU9wJOO_-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-26" value="doResolvePlaceholders(String text, PropertyPlaceholderHelper helper)实现对了资源路径的解析" style="whiteSpace=wrap;html=1;align=left;fillColor=#FF0000;strokeColor=#82b366;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-710" y="350" width="440" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=14;fontColor=#FF0000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="-McDBByZdcgpEU9wJOO_-31" target="-McDBByZdcgpEU9wJOO_-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-31" value="refresh() 完成了 bean 的创建过程" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="354" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-McDBByZdcgpEU9wJOO_-35" value="prepareRefresh&lt;br&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;this.startupDate = System.currentTimeMillis() 启动时间赋值&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;this.closed.set(false);&amp;nbsp;&lt;br&gt;&lt;/li&gt;&lt;li&gt;this.active.set(true);&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;initPropertySources() 父类留给子类有关环境属性的扩展方法，父类没有实现具体逻辑&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;align=left;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-260" y="440" width="510" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
